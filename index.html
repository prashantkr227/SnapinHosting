<HTML>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
    </head>
    <body>
		<div id="liveagent_invite_button_5734B000000CaZy" style="display:none;"><span style="cursor: pointer; width: 100px; height: 20px; padding: 5px;" onclick="liveagent.startChat('5734B000000CaZy')">Start Chat</span><span style="cursor: pointer; width: 100px; height: 20px; padding: 5px;" onclick="liveagent.rejectChat('5734B000000CaZy')">Reject Chat</span></div>
        <script type='text/javascript' src='https://service.force.com/embeddedservice/4.1/esw.min.js'></script>
        <script type='text/javascript'>
        var initESW = function(gslbBaseURL) {
        embedded_svc.settings.displayHelpButton = true; //Or false
        embedded_svc.settings.language = 'en-US'; //For example, enter 'en' or 'en-US'
        
        embedded_svc.settings.defaultMinimizedText = 'Chat with Support'; //(Defaults to Chat with an Expert)
        embedded_svc.settings.disabledMinimizedText = 'Support Offline'; //(Defaults to Agent Offline)
        
        embedded_svc.settings.loadingText = 'Loading...'; //(Defaults to Loading)
        //embedded_svc.settings.storageDomain = 'yourdomain.com'; //(Sets the domain for your deployment so that visitors can navigate subdomains during a chat session)
        
        // Settings for Live Agent
        embedded_svc.settings.avatarImgURL = '';
        embedded_svc.settings.prechatBackgroundImgURL = '';
        embedded_svc.settings.waitingStateBackgroundImgURL = '';
        embedded_svc.settings.smallCompanyLogoImgURL = '';
        //embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
        // Dynamically changes the button ID based on what the visitor enters in the pre-chat form.
        //Returns a valid button ID.
        //};
        
            embedded_svc.settings.enabledFeatures = ['LiveAgent'];
            embedded_svc.settings.entryFeature = 'LiveAgent';
            //embedded_svc.settings.prepopulatedPrechatFields = {}; //Sets the auto-population of pre-chat form fields

            embedded_svc.settings.widgetWidth = '444px';
            embedded_svc.settings.widgetHeight = '550px';
            
            /*Variable defined for Contact Mail*/
            //var mailId = 'tester1@testing.com';
            var mailId= 'testing2@test.com';
            var firstName = 'Prashant';
            var lastName = 'Kumar';
            var phoneNumber='1239874560';
            var contEmail = mailId;
            
            /*Variables defined for details to be displayed only in the current detail page*/
            var serviceName = 'VMware Cloud On AWS';
            var caseRecType = 'GSS Technical Support';
            var caseEnt = 'SPS';
            var caseProduct = 'VMware Cloud On AWS';
            
            /*Variables defined for Case details*/
            var caseOrigin = 'Chat';
            var caseStatus = 'Open';
            var caseSubStatus = 'Assigned';
            var caseDesc = 'Case created from Chat';
            var caseSubj = 'Case created from Chat';
            var caseSupLev = '1';
            var caseProbCat = 'VMware Cloud On AWS';
            var caseSev = 'S2';
            var caseEANumber = '12345';
            var caseRecTypeId = '01280000000cYyhAAE';
            var dcaId='0018000000onKRzAAM';
            
            /*Added service name and other details to be displayed in the current detail page*/
            embedded_svc.settings.extraPrechatFormDetails = [
                {"label": "Service Name", "value": serviceName, "displayToAgent": true},
                {"label": "Case Record Type", "value": caseRecType, "displayToAgent": true},
                {"label": "Case Entitlement", "value": caseEnt, "displayToAgent": true},
                {"label": "Case Product", "value": caseProduct, "displayToAgent": true},
                {"label": "Email Id", "value": contEmail, "displayToAgent": true},
                {"label": "Case Origin", "value": caseOrigin, "displayToAgent": true},
                {"label": "Case Status", "value": caseStatus, "displayToAgent": true},
                {"label": "Case Sub Status", "value": caseSubStatus, "displayToAgent": true},
                {"label": "Case Description", "value": caseDesc, "displayToAgent": true},
                {"label": "Case Subject", "value": caseSubj, "displayToAgent": true},
                {"label": "Case Support Level", "value": caseSupLev, "displayToAgent": true},
                {"label": "Case Problem Category", "value": caseProbCat, "displayToAgent": true},
                {"label": "Case Severity", "value": caseSev, "displayToAgent": true},
                {"label": "Case RecordTypeId", "value": caseRecTypeId, "displayToAgent": false},
                {"label": "DCA Account ID", "value": dcaId, "displayToAgent": false},
                {"label": "First Name", "value": firstName, "displayToAgent": true},
                {"label": "Last Name", "value": lastName, "displayToAgent": true},
                {"label": "Case EA Number", "value": caseEANumber, "displayToAgent": true},
                {"label": "Contact Phone Number", "value": phoneNumber, "displayToAgent": false}
            ];
            
            /*Maps the value with Case fields and creates a Case and also links to chat based on whether contact is null, existing or a user*/
            if(contEmail != '' || contEmail != null){
                embedded_svc.settings.extraPrechatInfo = [{
                    "entityFieldMaps": [
                        {"doCreate":true, "doFind":true, "fieldName":"Email", "isExactMatch":true, "label":"Email Id"},
                        {"doCreate":true, "doFind":false, "fieldName":"FirstName", "isExactMatch":true, "label":"First Name"},
                        {"doCreate":true, "doFind":false, "fieldName":"LastName", "isExactMatch":true, "label":"Last Name"},
                        {"doCreate":true, "doFind":false, "fieldName":"Phone", "isExactMatch":false, "label":"Contact Phone Number"},
                        {"doCreate":true, "doFind":false, "fieldName":"AccountId", "isExactMatch":false, "label":"DCA Account ID"}
                    ],
                    "entityName":"Contact",
                    "saveToTranscript": "ContactId",
                    "showOnCreate": true
                },
                {
                    "entityFieldMaps": [
                        {"doCreate": false,"doFind": true,"fieldName": "ContactEmail","isExactMatch": true,"label": "Email Id"},
                        {"doCreate": false,"doFind": true,"fieldName": "Origin","isExactMatch": false,"label": "Case Origin"},
                        {"doCreate": false,"doFind": true,"fieldName": "Status","isExactMatch": false,"label": "Case Status"},
                        {"doCreate": false,"doFind": true,"fieldName": "RecordTypeId","isExactMatch": false,"label": "Case RecordTypeId"}
                    ],
                    "entityName": "Case",
                    "saveToTranscript": "CaseId",
                    "showOnCreate": false
                }];
            }


embedded_svc.init('https://vmware--DEV2.cs51.my.salesforce.com', 'https://dev2-vmstarcommunity.cs51.force.com/', gslbBaseURL, '00D4B000000D2NP', 'VMware_Cloud_on_AWS', { baseLiveAgentContentURL: 'https://c.la1-c1cs-phx.salesforceliveagent.com/content', deploymentId: '5724B000000CaSe', buttonId: '5734B000000CaZt', baseLiveAgentURL: 'https://d.la1-c1cs-phx.salesforceliveagent.com/chat', eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04I4B0000008OIoUAM_1629a5b3d0c'}); };if (!window.embedded_svc) { var s = document.createElement('script'); s.setAttribute('src', 'https://vmware--DEV2.cs51.my.salesforce.com/embeddedservice/4.1/esw.min.js'); s.onload = function() { initESW(null); }; document.body.appendChild(s); } else { initESW('https://service.force.com'); }</script>

    </body>
</HTML>
